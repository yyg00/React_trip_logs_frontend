(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{12:function(t,e,n){},29:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(16),s=n.n(r),o=(n(29),n(2)),i=n(3),l=n(5),h=n(4),d=(n(12),n(13)),u=n(0),m=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={title:"",year:"",body:"",continentId:"",country:"",error:""},a}return Object(i.a)(n,[{key:"deletePost",value:function(){var t=this;if(window.confirm("Are you sure to delete this log?")){var e=this.props.match.params.logId;fetch("https://itp404-final-project-backend.herokuapp.com/api/logs/".concat(e),{method:"DELETE"}).then((function(){d.b.success("Successfully deleted"),t.props.history.push("/"),t.props.history.push("/logs")}))}}},{key:"handleYearChange",value:function(t){this.setState({year:t.target.value})}},{key:"handleTitleChange",value:function(t){this.setState({title:t.target.value})}},{key:"handleBodyChange",value:function(t){this.setState({body:t.target.value})}},{key:"handleSubmit",value:function(t){var e=this;if(t.preventDefault(),""!==this.state.title){var n=this.props.match.params.logId;fetch("https://itp404-final-project-backend.herokuapp.com/api/logs/".concat(n),{method:"PUT",body:JSON.stringify({title:this.state.title,year:this.state.year,body:this.state.body,continentId:this.state.continentId,country:this.state.country}),headers:{"Content-type":"application/json"}}).then((function(t){return t.json()})).then((function(t){d.b.success('Log "'.concat(t.title,'" was successfully updated')),e.props.history.push("/"),e.props.history.push("/logs")}))}else this.setState({error:"Title cannot be empty"})}},{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.logId;fetch("https://itp404-final-project-backend.herokuapp.com/api/logs/".concat(e)).then((function(t){return t.json()})).then((function(e){t.setState(e),document.title='Log "'.concat(t.state.title,'"')}))}},{key:"render",value:function(){var t=this;return Object(u.jsxs)("form",{onSubmit:function(e){t.handleSubmit(e)},children:[Object(u.jsxs)("div",{className:"my-3 form-group required",children:[Object(u.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),Object(u.jsx)("input",{id:"title",className:"form-control",value:this.state.title,onChange:function(e){t.handleTitleChange(e)}}),Object(u.jsx)("span",{style:{color:"red"},children:this.state.error})]}),Object(u.jsxs)("div",{className:"my-3",children:[Object(u.jsx)("label",{htmlFor:"body",className:"form-label",children:"Body"}),Object(u.jsx)("textarea",{id:"body",className:"form-control",value:this.state.body,onChange:function(e){t.handleBodyChange(e)}})]}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary edit",children:"Edit"}),Object(u.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){t.deletePost()},children:"Delete"})]})}}]),n}(c.a.Component),j=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){document.title="404 Not Found"}},{key:"render",value:function(){return Object(u.jsx)("h1",{"data-testid":"not_found",children:"404 Not Found"})}}]),n}(c.a.Component),b=n(14),p=(n(17),n(8)),O=n(19),f=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var t=this;return this.props.content?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"tab mb-2",children:Object(u.jsx)("span",{className:"title text-center",children:Object(u.jsx)("button",{onClick:function(){t.props.handleclick()},className:this.props.active?"btn btn-secondary":"btn btn-primary",children:this.props.active?this.props.buttonText[1]?this.props.buttonText[1]:"-":this.props.buttonText[0]?this.props.buttonText[0]:"+"})})}),Object(u.jsx)("div",{className:this.props.active?"content show":"content hide",children:this.props.content})]}):Object(u.jsx)(u.Fragment,{})}}]),n}(c.a.Component),y=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;Object(o.a)(this,n),a=e.call(this,t);var c=t.tabs,r=t.showText,s=t.hideText;return a.state={tabs:c,active:!1,buttonText:[r,s]},a.handleTabClick=a.handleTabClick.bind(Object(O.a)(a)),a}return Object(i.a)(n,[{key:"handleTabClick",value:function(){!1===this.state.active?this.setState({active:!0}):this.setState({active:!1})}},{key:"render",value:function(){var t=this.state.tabs;return Object(u.jsx)("div",{id:"accordion",children:Object(u.jsx)(f,{handleclick:this.handleTabClick,content:t.body,active:this.state.active,buttonText:this.state.buttonText})})}}]),n}(c.a.Component),x=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={data:[],continents:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.continentId;fetch("https://itp404-final-project-backend.herokuapp.com/api/continents").then((function(t){return t.json()})).then((function(n){t.setState({continents:Object(b.a)(n.map((function(t){return t.name})))}),document.title="Logs for ".concat(t.state.continents[e])})),fetch("https://itp404-final-project-backend.herokuapp.com/api/logs").then((function(t){return t.json()})).then((function(n){for(var a=0;a<n.length;a++)n[a].continentId===e&&t.setState({data:[].concat(Object(b.a)(t.state.data),[n[a]])})}))}},{key:"render",value:function(){return 0===this.state.data.length?Object(u.jsx)("div",{children:"No records found."}):Object(u.jsx)("div",{className:"container-fluid",children:Object(u.jsxs)("table",{className:"table table-striped",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"row",children:[Object(u.jsx)("th",{className:"col",children:"Country"}),Object(u.jsx)("th",{className:"col",children:"Trip Year"}),Object(u.jsx)("th",{className:"col",children:"Log"})]})}),Object(u.jsx)("tbody",{children:this.state.data.map((function(t){return Object(u.jsxs)("tr",{className:"row",children:[Object(u.jsx)("td",{className:"col",children:t.country}),Object(u.jsx)("td",{className:"col",children:t.year}),Object(u.jsxs)("td",{className:"col",children:[" ",Object(u.jsx)(p.b,{to:"/logs/".concat(t.id),children:t.title}),Object(u.jsx)(y,{tabs:t})]})]},t.id)}))})]})})}}]),n}(c.a.Component),v=n.p+"static/media/continents.429a3d41.png",g=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={data:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=this;document.title="Home page",fetch("https://itp404-final-project-backend.herokuapp.com/api/continents").then((function(t){return t.json()})).then((function(e){t.setState({data:e})}))}},{key:"render",value:function(){return Object(u.jsxs)("div",{className:"text-center",children:[Object(u.jsx)(p.b,{to:"/logs",children:Object(u.jsx)("img",{src:v,alt:"all"})}),this.state.data.map((function(t){return Object(u.jsxs)("div",{children:[" ",Object(u.jsx)(p.b,{to:"/logs/continents/".concat(t.id),"data-testid":t.name,children:t.name}),Object(u.jsx)("div",{className:"mb-3","data-testid":"accordion",children:Object(u.jsx)(y,{tabs:t,showText:"Show more",hideText:"Hide"})})]},t.id)}))]})}}]),n}(c.a.Component),N=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("nav",{className:"mt-2",children:[Object(u.jsxs)("ul",{className:"nav justify-content-center",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(p.c,{exact:!0,className:"nav-link",to:"/",children:"Home"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(p.c,{className:"nav-link",to:"/logs",children:"Logs"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(p.c,{exact:!0,className:"nav-link",to:"/newLog",children:"Create a log"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(p.c,{exact:!0,className:"nav-link",to:"/comment",children:"Comments"})})]}),Object(u.jsx)("hr",{})]})}}]),n}(c.a.Component);var C=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={continentId:"",country:"",year:"",title:"",body:"",continents:[],id:"",errors:{error_continent:"",error_country:"",error_year:"",error_title:""}},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=this;document.title="Create a new log",fetch("https://itp404-final-project-backend.herokuapp.com/api/continents").then((function(t){return t.json()})).then((function(e){t.setState({continents:e})})),fetch("https://itp404-final-project-backend.herokuapp.com/api/logs").then((function(t){return t.json()})).then((function(e){t.setState({id:String(0!==e.length?Math.max.apply(Math,Object(b.a)(e.map((function(t){return parseInt(t.id)}))))+1:0)})}))}},{key:"handleCountryChange",value:function(t){this.setState({country:t.target.value})}},{key:"handleYearChange",value:function(t){this.setState({year:t.target.value})}},{key:"handleTitleChange",value:function(t){this.setState({title:t.target.value})}},{key:"handleBodyChange",value:function(t){this.setState({body:t.target.value})}},{key:"handleContinentChange",value:function(t){this.setState({continentId:t.target.value})}},{key:"handleSubmit",value:function(t){var e=this;t.preventDefault();var n=function(t,e,n,a){var c={error_continent:"",error_country:"",error_year:"",error_title:""};return""===t&&(c.error_continent="Continent cannot be empty"),""===e&&(c.error_country="Country cannot be empty"),""===a&&(c.error_title="Title cannot be empty"),""===n?c.error_year="Year cannot be empty":(isNaN(parseInt(n))||parseInt(n)<1980||parseInt(n)>2021)&&(c.error_year="Year should be in range 1980-2021"),c}(this.state.continentId,this.state.country,this.state.year,this.state.title);""===n.error_continent&&""===n.error_country&&""===n.error_year&&""===n.error_title?fetch("https://itp404-final-project-backend.herokuapp.com/api/logs",{method:"POST",body:JSON.stringify({title:this.state.title,body:this.state.body,id:this.state.id,continentId:this.state.continentId,year:this.state.year,country:this.state.country,error_continent:"",error_country:"",error_year:"",error_title:""}),headers:{"Content-type":"application/json"}}).then((function(t){return t.json()})).then((function(t){d.b.success('"'.concat(t.title,'" was successfully created')),e.props.history.push("/logs")})):this.setState({errors:{error_continent:n.error_continent,error_country:n.error_country,error_year:n.error_year,error_title:n.error_title}})}},{key:"render",value:function(){var t=this;return Object(u.jsxs)("form",{onSubmit:function(e){t.handleSubmit(e)},children:[Object(u.jsxs)("div",{className:"my-3 form-group required",children:[Object(u.jsx)("label",{className:"text-sm-right form-label col-2",htmlFor:"continent",children:"Continent"}),Object(u.jsxs)("select",{className:"form-select",id:"continent","data-testid":"select",value:this.state.continentId,onChange:function(e){t.handleContinentChange(e)},children:[Object(u.jsx)("option",{children:"--Select Continent--"}),Object(u.jsx)("option",{"data-testid":"select-option",value:"0",children:"Africa"}),Object(u.jsx)("option",{"data-testid":"select-option",value:"1",children:"Antractica"}),Object(u.jsx)("option",{"data-testid":"select-option",value:"2",children:"Asia"}),Object(u.jsx)("option",{"data-testid":"select-option",value:"3",children:"Australia"}),Object(u.jsx)("option",{"data-testid":"select-option",value:"4",children:"Europe"}),Object(u.jsx)("option",{"data-testid":"select-option",value:"5",children:"North America"}),Object(u.jsx)("option",{"data-testid":"select-option",value:"6",children:"South America"})]}),Object(u.jsx)("span",{style:{color:"red"},children:this.state.errors.error_continent})]}),Object(u.jsxs)("div",{className:"my-3 form-group required",children:[Object(u.jsx)("label",{htmlFor:"country",className:"form-label",children:"Country"}),Object(u.jsx)("input",{id:"country",type:"text","data-testid":"country",className:"form-control",value:this.state.country,onChange:function(e){t.handleCountryChange(e)}}),Object(u.jsx)("span",{style:{color:"red"},children:this.state.errors.error_country})]}),Object(u.jsxs)("div",{className:"my-3 form-group required",children:[Object(u.jsx)("label",{htmlFor:"year",className:"form-label",children:"Year"}),Object(u.jsx)("input",{id:"year",type:"number","data-testid":"year",className:"form-control",value:this.state.year,onChange:function(e){t.handleYearChange(e)}}),Object(u.jsx)("span",{style:{color:"red"},children:this.state.errors.error_year})]}),Object(u.jsxs)("div",{className:"my-3 form-group required",children:[Object(u.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),Object(u.jsx)("input",{id:"title",type:"text",className:"form-control",value:this.state.title,onChange:function(e){t.handleTitleChange(e)}}),Object(u.jsx)("span",{style:{color:"red"},children:this.state.errors.error_title})]}),Object(u.jsxs)("div",{className:"my-3 form-group",children:[Object(u.jsx)("label",{htmlFor:"body",className:"form-label",children:"Body"}),Object(u.jsx)("textarea",{id:"body",className:"form-control",value:this.state.body,onChange:function(e){t.handleBodyChange(e)}})]}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create a new log"})]})}}]),n}(c.a.Component),k=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={data:[],continents:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=this;document.title="All logs",fetch("https://itp404-final-project-backend.herokuapp.com/api/logs").then((function(t){return t.json()})).then((function(e){t.setState({data:e})})),fetch("https://itp404-final-project-backend.herokuapp.com/api/continents").then((function(t){return t.json()})).then((function(e){t.setState({continents:Object(b.a)(e.map((function(t){return t.name})))})}))}},{key:"render",value:function(){var t=this;return 0!==this.state.data.length?Object(u.jsx)("div",{className:"container-fluid",children:Object(u.jsxs)("table",{className:"table table-striped",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"row",children:[Object(u.jsx)("th",{className:"col-3",children:"Continent"}),Object(u.jsx)("th",{className:"col-3",children:"Country"}),Object(u.jsx)("th",{className:"col-3",children:"Trip Year"}),Object(u.jsx)("th",{className:"col-3",children:"Log"})]})}),Object(u.jsx)("tbody",{children:this.state.data.map((function(e){return Object(u.jsxs)("tr",{className:"row",children:[Object(u.jsx)("td",{className:"col-3",children:t.state.continents[e.continentId]}),Object(u.jsx)("td",{className:"col-3",children:e.country}),Object(u.jsx)("td",{className:"col-3",children:e.year}),Object(u.jsxs)("td",{className:"col-3",children:[" ",Object(u.jsx)(p.b,{to:"/logs/".concat(e.id),children:e.title}),Object(u.jsx)(y,{tabs:e})]})]},e.id)}))})]})}):Object(u.jsx)("div",{children:"No records found."})}}]),n}(c.a.Component),S=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var t=this,e=document.getElementById("modal-container");return s.a.createPortal(Object(u.jsx)("div",{className:"modal",tabIndex:"-1",children:Object(u.jsx)("div",{className:"modal-dialog",children:Object(u.jsxs)("div",{className:"modal-content",children:[Object(u.jsxs)("div",{className:"modal-header",children:[Object(u.jsx)("h5",{className:"modal-title",children:this.props.title}),Object(u.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:this.props.onClose})]}),Object(u.jsx)("div",{className:"modal-body",children:Object(u.jsxs)("form",{onSubmit:function(e){t.props.handleSubmit(e)},children:[Object(u.jsx)("label",{className:"text-sm-right form-label",htmlFor:"name",children:"Commenter's name"}),Object(u.jsx)("input",{id:"name",className:"form-control",type:"text",onChange:function(e){t.props.handleNameChange(e)}}),Object(u.jsx)("span",{style:{color:"red"},children:this.props.state.errors.error_name}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{className:"text-sm-right form-label",htmlFor:"comment",children:"Comment"}),Object(u.jsx)("textarea",{id:"comment",className:"form-control",onChange:function(e){t.props.handleCommentChange(e)}}),Object(u.jsx)("span",{style:{color:"red"},children:this.props.state.errors.error_comment})]})]})}),Object(u.jsxs)("div",{className:"modal-footer",children:[Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(e){t.props.handleSubmit(e)},children:"Submit"}),Object(u.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:this.props.onClose,children:"Close"})]})]})})}),e)}}]),n}(c.a.Component);var _=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).handleCommentChange=function(t){a.setState({comment:t.target.value})},a.handleNameChange=function(t){a.setState({name:t.target.value})},a.handleSubmit=function(t){t.preventDefault();var e=function(t,e){var n={error_name:"",error_comment:""};return""===t&&(n.error_name="Commenter's name cannot be empty"),""===e&&(n.error_comment="Comment cannot be empty"),n}(a.state.name,a.state.comment);""===e.error_comment&&""===e.error_name?(document.getElementById("root").style.filter="blur(0px) grayscale(0%)",a.setState({isModalOpen:!1}),fetch("https://itp404-final-project-backend.herokuapp.com/api/comments",{method:"POST",body:JSON.stringify({name:a.state.name,comment:a.state.comment,time:(new Date).getTime(),error_name:"",error_comment:""}),headers:{"Content-type":"application/json"}}).then((function(t){return t.json()})).then((function(t){d.b.success("Your comment was successfully sent"),a.props.history.push("/"),a.props.history.push("/comment")}))):a.setState({errors:{error_name:e.error_name,error_comment:e.error_comment}})},a.state={isModalOpen:!1,name:"",comment:"",time:"",errors:{error_name:"",error_comment:""},data:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=this;document.title="Comments",fetch("https://itp404-final-project-backend.herokuapp.com/api/comments").then((function(t){return t.json()})).then((function(e){t.setState({data:e.sort((function(t,e){return t.time<e.time?1:-1}))})}))}},{key:"render",value:function(){var t=this;return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){t.setState({isModalOpen:!0}),document.getElementById("root").style.filter="blur(5px)"},children:"Leave Your Comment Here"}),this.state.isModalOpen&&Object(u.jsx)(S,{title:"Add a comment",state:this.state,onClose:function(){document.getElementById("root").style.filter="blur(0px) grayscale(0%)",t.setState({isModalOpen:!1,name:"",comment:"",time:"",errors:{error_name:"",error_comment:""}})},handleSubmit:this.handleSubmit,handleNameChange:this.handleNameChange,handleCommentChange:this.handleCommentChange}),Object(u.jsx)("div",{className:"container mx-auto align-center",children:Object(u.jsxs)("table",{className:"table table-striped",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"row",children:[Object(u.jsx)("th",{className:"col",children:"Commenter's Name"}),Object(u.jsx)("th",{className:"col",children:"Comment"}),Object(u.jsx)("th",{className:"col",children:"Submitted Time"})]})}),Object(u.jsx)("tbody",{children:this.state.data.map((function(t){return Object(u.jsxs)("tr",{className:"row",children:[Object(u.jsx)("td",{className:"col",children:t.name}),Object(u.jsx)("td",{className:"col",children:t.comment}),Object(u.jsx)("td",{className:"col","data-testid":"comment_time",children:(e=t.time,new Date(e).toISOString().slice(0,19).replace("T"," "))})]},t.id);var e}))})]})})]})}}]),n}(c.a.Component),T=(n(39),n(6)),I=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(u.jsxs)(p.a,{children:[Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(N,{}),Object(u.jsxs)(T.c,{children:[Object(u.jsx)(T.a,{exact:!0,path:"/comment",component:_}),Object(u.jsx)(T.a,{exact:!0,path:"/newLog",component:C}),Object(u.jsx)(T.a,{path:"/logs/continents/:continentId",component:x}),Object(u.jsx)(T.a,{path:"/logs/:logId",component:m}),Object(u.jsx)(T.a,{exact:!0,path:"/logs",component:k}),Object(u.jsx)(T.a,{exact:!0,path:"/",children:Object(u.jsx)(g,{})}),Object(u.jsx)(T.a,{component:j})]})]}),Object(u.jsx)(d.a,{})]})}}]),n}(c.a.Component),w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,s=e.getTTFB;n(t),a(t),c(t),r(t),s(t)}))};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(I,{})}),document.getElementById("root")),w()}},[[40,1,2]]]);
//# sourceMappingURL=main.77bc25e5.chunk.js.map