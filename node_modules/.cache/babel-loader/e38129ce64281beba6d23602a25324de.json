{"ast":null,"code":"var _jsxFileName = \"/Users/yiyaoguo/Desktop/final-project-frontend/src/Log.js\";\nimport React from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"./style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class EditLog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: \"\",\n      year: \"\",\n      body: \"\",\n      continentId: \"\",\n      country: \"\",\n      error: \"\"\n    };\n  }\n\n  deletePost() {\n    const isConfirmed = window.confirm(\"Are you sure to delete this log?\");\n\n    if (!isConfirmed) {\n      return;\n    }\n\n    const id = this.props.match.params.logId;\n    fetch(`https://itp404-final-project-backend.herokuapp.com/api/logs/${id}`, {\n      method: \"DELETE\"\n    }).then(() => {\n      toast.success(`Successfully deleted`);\n      this.props.history.push(\"/\");\n      this.props.history.push(\"/logs\");\n    });\n  }\n\n  handleYearChange(event) {\n    this.setState({\n      year: event.target.value\n    });\n  }\n\n  handleTitleChange(event) {\n    this.setState({\n      title: event.target.value\n    });\n  }\n\n  handleBodyChange(event) {\n    this.setState({\n      body: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    if (this.state.title === \"\") {\n      this.setState({\n        error: \"Title cannot be empty\"\n      });\n      return;\n    }\n\n    const id = this.props.match.params.logId;\n    fetch(`https://itp404-final-project-backend.herokuapp.com/api/logs/${id}`, {\n      method: \"PUT\",\n      body: JSON.stringify({\n        title: this.state.title,\n        year: this.state.year,\n        body: this.state.body,\n        continentId: this.state.continentId,\n        country: this.state.country\n      }),\n      headers: {\n        \"Content-type\": \"application/json\"\n      }\n    }).then(response => {\n      return response.json();\n    }).then(json => {\n      toast.success(`Log \"${json.title}\" was successfully updated`);\n      this.props.history.push(\"/\");\n      this.props.history.push(\"/logs\");\n    });\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.logId;\n    fetch(`https://itp404-final-project-backend.herokuapp.com/api/logs/${id}`).then(response => {\n      return response.json();\n    }).then(json => {\n      this.setState(json);\n      document.title = `Log \"${this.state.title}\"`;\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: event => {\n        this.handleSubmit(event);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-3 form-group required\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"title\",\n          className: \"form-label\",\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"title\",\n          className: \"form-control\",\n          value: this.state.title,\n          onChange: event => {\n            this.handleTitleChange(event);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"red\"\n          },\n          children: this.state.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"body\",\n          className: \"form-label\",\n          children: \"Body\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"body\",\n          className: \"form-control\",\n          value: this.state.body,\n          onChange: event => {\n            this.handleBodyChange(event);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-danger\",\n          onClick: () => {\n            this.deletePost();\n          },\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/yiyaoguo/Desktop/final-project-frontend/src/Log.js"],"names":["React","toast","EditLog","Component","constructor","props","state","title","year","body","continentId","country","error","deletePost","isConfirmed","window","confirm","id","match","params","logId","fetch","method","then","success","history","push","handleYearChange","event","setState","target","value","handleTitleChange","handleBodyChange","handleSubmit","preventDefault","JSON","stringify","headers","response","json","componentDidMount","document","render","color"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"./style.css\";\nexport default class EditLog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: \"\",\n      year: \"\",\n      body: \"\",\n      continentId: \"\",\n      country: \"\",\n      error: \"\",\n    };\n  }\n  deletePost() {\n    const isConfirmed = window.confirm(\"Are you sure to delete this log?\");\n    if (!isConfirmed) {\n      return;\n    }\n    const id = this.props.match.params.logId;\n    fetch(`https://itp404-final-project-backend.herokuapp.com/api/logs/${id}`, {\n      method: \"DELETE\",\n    }).then(() => {\n      toast.success(`Successfully deleted`);\n      this.props.history.push(\"/\");\n      this.props.history.push(\"/logs\");\n    });\n  }\n  handleYearChange(event) {\n    this.setState({\n      year: event.target.value,\n    });\n  }\n  handleTitleChange(event) {\n    this.setState({\n      title: event.target.value,\n    });\n  }\n  handleBodyChange(event) {\n    this.setState({\n      body: event.target.value,\n    });\n  }\n  handleSubmit(event) {\n    event.preventDefault();\n    if (this.state.title === \"\") {\n      this.setState({ error: \"Title cannot be empty\" });\n      return;\n    }\n    const id = this.props.match.params.logId;\n    fetch(`https://itp404-final-project-backend.herokuapp.com/api/logs/${id}`, {\n      method: \"PUT\",\n      body: JSON.stringify({\n        title: this.state.title,\n        year: this.state.year,\n        body: this.state.body,\n        continentId: this.state.continentId,\n        country: this.state.country,\n      }),\n      headers: {\n        \"Content-type\": \"application/json\",\n      },\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then((json) => {\n        toast.success(`Log \"${json.title}\" was successfully updated`);\n        this.props.history.push(\"/\");\n        this.props.history.push(\"/logs\");\n      });\n  }\n  componentDidMount() {\n    const id = this.props.match.params.logId;\n    fetch(`https://itp404-final-project-backend.herokuapp.com/api/logs/${id}`)\n      .then((response) => {\n        return response.json();\n      })\n      .then((json) => {\n        this.setState(json);\n        document.title = `Log \"${this.state.title}\"`;\n      });\n  }\n\n  render() {\n    return (\n      <form\n        onSubmit={(event) => {\n          this.handleSubmit(event);\n        }}\n      >\n        <div className=\"my-3 form-group required\">\n          <label htmlFor=\"title\" className=\"form-label\">\n            Title\n          </label>\n          <input\n            id=\"title\"\n            className=\"form-control\"\n            value={this.state.title}\n            onChange={(event) => {\n              this.handleTitleChange(event);\n            }}\n          />\n          <span style={{ color: \"red\" }}>{this.state.error}</span>\n        </div>\n        <div className=\"my-3\">\n          <label htmlFor=\"body\" className=\"form-label\">\n            Body\n          </label>\n          <textarea\n            id=\"body\"\n            className=\"form-control\"\n            value={this.state.body}\n            onChange={(event) => {\n              this.handleBodyChange(event);\n            }}\n          ></textarea>\n          <button type=\"submit\" className=\"btn btn-primary\">\n            Edit\n          </button>\n\n          <button\n            type=\"button\"\n            className=\"btn btn-danger\"\n            onClick={() => {\n              this.deletePost();\n            }}\n          >\n            Delete\n          </button>\n        </div>\n      </form>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}