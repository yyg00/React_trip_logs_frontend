{"ast":null,"code":"var _jsxFileName = \"/Users/yiyaoguo/Desktop/final-project-frontend/src/CreateLogForm.js\";\nimport React from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"./style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction validate_form(continentId, country, year, title) {\n  let errors = {\n    error_continent: \"\",\n    error_country: \"\",\n    error_year: \"\",\n    error_title: \"\"\n  };\n\n  if (continentId === \"\") {\n    //   this.setState({\n    //     error_continent: \"Continent cannot be empty\",\n    //   });\n    errors.error_continent = \"Continent cannot be empty\";\n  }\n\n  if (country === \"\") {\n    //   this.setState({\n    //     error_country: \"Country cannot be empty\",\n    //   });\n    errors.error_country = \"Country cannot be empty\";\n  }\n\n  if (title === \"\") {\n    //   this.setState({\n    //     error_title: \"Title cannot be empty\",\n    //   });\n    errors.error_title = \"Title cannot be empty\";\n  }\n\n  if (year === \"\" || !isNaN(year) && Number.isInteger(parseFloat(year))) {\n    //   this.setState({\n    //     error_year: \"Year cannot be empty and it must be in 1980-2021\",\n    //   });\n    errors.error_title = \"Year cannot be empty and it must be in 1980-2021\";\n  } // if (\n  //   this.state.error_continent !== \"\" ||\n  //   this.state.error_country !== \"\" ||\n  //   this.state.error_year !== \"\" ||\n  //   this.state.error_title !== \"\"\n  // ) {\n  //   valid = false;\n  // } else {\n  //   valid = true;\n  // }\n  // return valid;\n\n\n  return errors;\n}\n\nexport default class CreateLogForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      continentId: \"\",\n      country: \"\",\n      year: \"\",\n      title: \"\",\n      body: \"\",\n      continents: [],\n      id: \"\",\n      errors: {\n        error_continent: \"\",\n        error_country: \"\",\n        error_year: \"\",\n        error_title: \"\"\n      }\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:4000/api/continents\").then(response => {\n      return response.json();\n    }).then(json => {\n      this.setState({\n        continents: json\n      });\n    });\n    fetch(\"http://localhost:4000/api/logs\").then(response => {\n      return response.json();\n    }).then(json => {\n      this.setState({\n        id: String(json.length)\n      });\n    });\n  }\n\n  handleCountryChange(event) {\n    this.setState({\n      country: event.target.value\n    });\n  }\n\n  handleYearChange(event) {\n    this.setState({\n      year: event.target.value\n    });\n  }\n\n  handleTitleChange(event) {\n    this.setState({\n      title: event.target.value\n    });\n  }\n\n  handleBodyChange(event) {\n    this.setState({\n      body: event.target.value\n    });\n  }\n\n  handleContinentChange(event) {\n    this.setState({\n      continentId: event.target.value\n    });\n  } //   validate_form(continentId, country, year, title) {\n  //     let errors = {\n  //       error_continent: \"\",\n  //       error_country: \"\",\n  //       error_year: \"\",\n  //       error_title: \"\",\n  //     };\n  //     if (continentId === \"\") {\n  //       //   this.setState({\n  //       //     error_continent: \"Continent cannot be empty\",\n  //       //   });\n  //       errors.error_continent = \"Continent cannot be empty\";\n  //     }\n  //     if (country === \"\") {\n  //       //   this.setState({\n  //       //     error_country: \"Country cannot be empty\",\n  //       //   });\n  //       errors.error_country = \"Country cannot be empty\";\n  //     }\n  //     if (title === \"\") {\n  //       //   this.setState({\n  //       //     error_title: \"Title cannot be empty\",\n  //       //   });\n  //       errors.error_title = \"Title cannot be empty\";\n  //     }\n  //     if (year === \"\" || (!isNaN(year) && Number.isInteger(parseFloat(year)))) {\n  //       //   this.setState({\n  //       //     error_year: \"Year cannot be empty and it must be in 1980-2021\",\n  //       //   });\n  //       errors.error_title = \"Year cannot be empty and it must be in 1980-2021\";\n  //     }\n  //     // if (\n  //     //   this.state.error_continent !== \"\" ||\n  //     //   this.state.error_country !== \"\" ||\n  //     //   this.state.error_year !== \"\" ||\n  //     //   this.state.error_title !== \"\"\n  //     // ) {\n  //     //   valid = false;\n  //     // } else {\n  //     //   valid = true;\n  //     // }\n  //     // return valid;\n  //     return errors;\n  //   }\n\n\n  handleSubmit(event) {\n    event.preventDefault();\n    const continentId = this.state.continentId;\n    const country = this.state.country;\n    const year = this.state.year;\n    const title = this.state.title;\n    let errors = validate_form(continentId, country, year, title);\n\n    if (errors.error_continent !== \"\" || errors.error_country !== \"\" || errors.error_year !== \"\" || errors.error_title !== \"\") {\n      this.setState({\n        errors: errors\n      });\n      return;\n    } else {\n      fetch(\"http://localhost:4000/api/logs\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          title: this.state.title,\n          body: this.state.body,\n          id: this.state.id,\n          continentId: this.state.continentId,\n          year: this.state.year,\n          country: this.state.country,\n          error_continent: \"\",\n          error_country: \"\",\n          error_year: \"\",\n          error_title: \"\"\n        }),\n        headers: {\n          \"Content-type\": \"application/json\"\n        }\n      }).then(response => {\n        return response.json();\n      }).then(json => {\n        console.log(json);\n        toast.success(`Post: \"${json.title}\" was successfully created`);\n        this.props.history.push(\"/\");\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: event => {\n        this.handleSubmit(event);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-3 form-group required\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-sm-right form-label col-2\",\n          htmlFor: \"continent\",\n          children: \"Continent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"form-select\",\n          id: \"continent\",\n          value: this.state.continentId,\n          onChange: event => {\n            this.handleContinentChange(event);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"--Select Continent--\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), this.state.continents.map(continent => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: continent.id,\n            children: continent.name\n          }, continent.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"red\"\n          },\n          children: this.state.error_continent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-3 form-group required\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"country\",\n          className: \"form-label\",\n          children: \"Country\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"country\",\n          className: \"form-control\",\n          value: this.state.country,\n          onChange: event => {\n            this.handleCountryChange(event);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"red\"\n          },\n          children: this.state.error_country\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-3 form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"yaer\",\n          className: \"form-label\",\n          children: \"Year\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"year\",\n          className: \"form-control\",\n          value: this.state.year,\n          onChange: event => {\n            this.handleYearChange(event);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"red\"\n          },\n          children: this.state.error_year\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-3 form-group required\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"title\",\n          className: \"form-label\",\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"title\",\n          className: \"form-control\",\n          value: this.state.title,\n          onChange: event => {\n            this.handleTitleChange(event);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"red\"\n          },\n          children: this.state.error_title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-3 form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"body\",\n          className: \"form-label\",\n          children: \"Body\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"body\",\n          className: \"form-control\",\n          value: this.state.body,\n          onChange: event => {\n            this.handleBodyChange(event);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        children: \"Create a new log\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/yiyaoguo/Desktop/final-project-frontend/src/CreateLogForm.js"],"names":["React","toast","validate_form","continentId","country","year","title","errors","error_continent","error_country","error_year","error_title","isNaN","Number","isInteger","parseFloat","CreateLogForm","Component","constructor","props","state","body","continents","id","componentDidMount","fetch","then","response","json","setState","String","length","handleCountryChange","event","target","value","handleYearChange","handleTitleChange","handleBodyChange","handleContinentChange","handleSubmit","preventDefault","method","JSON","stringify","headers","console","log","success","history","push","render","map","continent","name","color"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"./style.css\";\nfunction validate_form(continentId, country, year, title) {\n  let errors = {\n    error_continent: \"\",\n    error_country: \"\",\n    error_year: \"\",\n    error_title: \"\",\n  };\n  if (continentId === \"\") {\n    //   this.setState({\n    //     error_continent: \"Continent cannot be empty\",\n    //   });\n    errors.error_continent = \"Continent cannot be empty\";\n  }\n  if (country === \"\") {\n    //   this.setState({\n    //     error_country: \"Country cannot be empty\",\n    //   });\n    errors.error_country = \"Country cannot be empty\";\n  }\n  if (title === \"\") {\n    //   this.setState({\n    //     error_title: \"Title cannot be empty\",\n    //   });\n    errors.error_title = \"Title cannot be empty\";\n  }\n  if (year === \"\" || (!isNaN(year) && Number.isInteger(parseFloat(year)))) {\n    //   this.setState({\n    //     error_year: \"Year cannot be empty and it must be in 1980-2021\",\n    //   });\n    errors.error_title = \"Year cannot be empty and it must be in 1980-2021\";\n  }\n  // if (\n  //   this.state.error_continent !== \"\" ||\n  //   this.state.error_country !== \"\" ||\n  //   this.state.error_year !== \"\" ||\n  //   this.state.error_title !== \"\"\n  // ) {\n  //   valid = false;\n  // } else {\n  //   valid = true;\n  // }\n  // return valid;\n  return errors;\n}\nexport default class CreateLogForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      continentId: \"\",\n      country: \"\",\n      year: \"\",\n      title: \"\",\n      body: \"\",\n      continents: [],\n      id: \"\",\n      errors: {\n        error_continent: \"\",\n        error_country: \"\",\n        error_year: \"\",\n        error_title: \"\",\n      },\n    };\n  }\n  componentDidMount() {\n    fetch(\"http://localhost:4000/api/continents\")\n      .then((response) => {\n        return response.json();\n      })\n      .then((json) => {\n        this.setState({\n          continents: json,\n        });\n      });\n    fetch(\"http://localhost:4000/api/logs\")\n      .then((response) => {\n        return response.json();\n      })\n      .then((json) => {\n        this.setState({\n          id: String(json.length),\n        });\n      });\n  }\n  handleCountryChange(event) {\n    this.setState({\n      country: event.target.value,\n    });\n  }\n  handleYearChange(event) {\n    this.setState({\n      year: event.target.value,\n    });\n  }\n  handleTitleChange(event) {\n    this.setState({\n      title: event.target.value,\n    });\n  }\n  handleBodyChange(event) {\n    this.setState({\n      body: event.target.value,\n    });\n  }\n  handleContinentChange(event) {\n    this.setState({\n      continentId: event.target.value,\n    });\n  }\n  //   validate_form(continentId, country, year, title) {\n  //     let errors = {\n  //       error_continent: \"\",\n  //       error_country: \"\",\n  //       error_year: \"\",\n  //       error_title: \"\",\n  //     };\n  //     if (continentId === \"\") {\n  //       //   this.setState({\n  //       //     error_continent: \"Continent cannot be empty\",\n  //       //   });\n  //       errors.error_continent = \"Continent cannot be empty\";\n  //     }\n  //     if (country === \"\") {\n  //       //   this.setState({\n  //       //     error_country: \"Country cannot be empty\",\n  //       //   });\n  //       errors.error_country = \"Country cannot be empty\";\n  //     }\n  //     if (title === \"\") {\n  //       //   this.setState({\n  //       //     error_title: \"Title cannot be empty\",\n  //       //   });\n  //       errors.error_title = \"Title cannot be empty\";\n  //     }\n  //     if (year === \"\" || (!isNaN(year) && Number.isInteger(parseFloat(year)))) {\n  //       //   this.setState({\n  //       //     error_year: \"Year cannot be empty and it must be in 1980-2021\",\n  //       //   });\n  //       errors.error_title = \"Year cannot be empty and it must be in 1980-2021\";\n  //     }\n  //     // if (\n  //     //   this.state.error_continent !== \"\" ||\n  //     //   this.state.error_country !== \"\" ||\n  //     //   this.state.error_year !== \"\" ||\n  //     //   this.state.error_title !== \"\"\n  //     // ) {\n  //     //   valid = false;\n  //     // } else {\n  //     //   valid = true;\n  //     // }\n  //     // return valid;\n  //     return errors;\n  //   }\n  handleSubmit(event) {\n    event.preventDefault();\n    const continentId = this.state.continentId;\n    const country = this.state.country;\n    const year = this.state.year;\n    const title = this.state.title;\n    let errors = validate_form(continentId, country, year, title);\n    if (\n      errors.error_continent !== \"\" ||\n      errors.error_country !== \"\" ||\n      errors.error_year !== \"\" ||\n      errors.error_title !== \"\"\n    ) {\n      this.setState({\n        errors: errors,\n      });\n      return;\n    } else {\n      fetch(\"http://localhost:4000/api/logs\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          title: this.state.title,\n          body: this.state.body,\n          id: this.state.id,\n          continentId: this.state.continentId,\n          year: this.state.year,\n          country: this.state.country,\n          error_continent: \"\",\n          error_country: \"\",\n          error_year: \"\",\n          error_title: \"\",\n        }),\n        headers: {\n          \"Content-type\": \"application/json\",\n        },\n      })\n        .then((response) => {\n          return response.json();\n        })\n        .then((json) => {\n          console.log(json);\n          toast.success(`Post: \"${json.title}\" was successfully created`);\n          this.props.history.push(\"/\");\n        });\n    }\n  }\n  render() {\n    return (\n      <form\n        onSubmit={(event) => {\n          this.handleSubmit(event);\n        }}\n      >\n        <div className=\"my-3 form-group required\">\n          <label className=\"text-sm-right form-label col-2\" htmlFor=\"continent\">\n            Continent\n          </label>\n          <select\n            className=\"form-select\"\n            id=\"continent\"\n            value={this.state.continentId}\n            onChange={(event) => {\n              this.handleContinentChange(event);\n            }}\n          >\n            <option>--Select Continent--</option>\n            {this.state.continents.map((continent) => (\n              <option key={continent.id} value={continent.id}>\n                {continent.name}\n              </option>\n            ))}\n          </select>\n          <span style={{ color: \"red\" }}>{this.state.error_continent}</span>\n        </div>\n        <div className=\"my-3 form-group required\">\n          <label htmlFor=\"country\" className=\"form-label\">\n            Country\n          </label>\n          <input\n            id=\"country\"\n            className=\"form-control\"\n            value={this.state.country}\n            onChange={(event) => {\n              this.handleCountryChange(event);\n            }}\n          />\n          <span style={{ color: \"red\" }}>{this.state.error_country}</span>\n        </div>\n        <div className=\"my-3 form-group\">\n          <label htmlFor=\"yaer\" className=\"form-label\">\n            Year\n          </label>\n          <input\n            id=\"year\"\n            className=\"form-control\"\n            value={this.state.year}\n            onChange={(event) => {\n              this.handleYearChange(event);\n            }}\n          />\n          <span style={{ color: \"red\" }}>{this.state.error_year}</span>\n        </div>\n        <div className=\"my-3 form-group required\">\n          <label htmlFor=\"title\" className=\"form-label\">\n            Title\n          </label>\n          <input\n            id=\"title\"\n            className=\"form-control\"\n            value={this.state.title}\n            onChange={(event) => {\n              this.handleTitleChange(event);\n            }}\n          />\n          <span style={{ color: \"red\" }}>{this.state.error_title}</span>\n        </div>\n        <div className=\"my-3 form-group\">\n          <label htmlFor=\"body\" className=\"form-label\">\n            Body\n          </label>\n          <textarea\n            id=\"body\"\n            className=\"form-control\"\n            value={this.state.body}\n            onChange={(event) => {\n              this.handleBodyChange(event);\n            }}\n          ></textarea>\n        </div>\n        <button type=\"submit\" className=\"btn btn-primary\">\n          Create a new log\n        </button>\n      </form>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}