{"ast":null,"code":"import _classCallCheck from\"/Users/yiyaoguo/Desktop/final-project-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yiyaoguo/Desktop/final-project-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/yiyaoguo/Desktop/final-project-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yiyaoguo/Desktop/final-project-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import\"./style.css\";import\"bootstrap/dist/css/bootstrap.css\";import Modal from\"./Modal\";import{toast}from\"react-toastify\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function timeConverter(UNIX_timestamp){var x=new Date(UNIX_timestamp).toISOString().slice(0,19).replace(\"T\",\" \");return x;}function validate_form(name,comment){var errors={error_name:\"\",error_comment:\"\"};if(name===\"\"){errors.error_name=\"Commenter's name cannot be empty\";}if(comment===\"\"){errors.error_comment=\"Comment cannot be empty\";}return errors;}var Comment=/*#__PURE__*/function(_React$Component){_inherits(Comment,_React$Component);var _super=_createSuper(Comment);function Comment(props){var _this;_classCallCheck(this,Comment);_this=_super.call(this,props);_this.handleCommentChange=function(event){_this.setState({comment:event.target.value});};_this.handleNameChange=function(event){_this.setState({name:event.target.value});};_this.handleSubmit=function(event){event.preventDefault();var name=_this.state.name;var comment=_this.state.comment;var errors=validate_form(name,comment);if(errors.error_comment!==\"\"||errors.error_name!==\"\"){_this.setState({errors:{error_name:errors.error_name,error_comment:errors.error_comment}});return;}else{document.getElementById(\"root\").style.filter=\"blur(0px) grayscale(0%)\";_this.setState({isModalOpen:false});fetch(\"https://itp404-final-project-backend.herokuapp.com/api/comments\",{method:\"POST\",body:JSON.stringify({name:_this.state.name,comment:_this.state.comment,//   time: Math.round(new Date().getTime() / 1000),\ntime:new Date().getTime(),error_name:\"\",error_comment:\"\"}),headers:{\"Content-type\":\"application/json\"}}).then(function(response){return response.json();}).then(function(json){toast.success(\"Your comment was successfully sent\");_this.props.history.push(\"/\");_this.props.history.push(\"/comment\");});}};_this.state={isModalOpen:false,name:\"\",comment:\"\",time:\"\",errors:{error_name:\"\",error_comment:\"\"},data:[]};return _this;}_createClass(Comment,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;document.title=\"Comments\";fetch(\"https://itp404-final-project-backend.herokuapp.com/api/comments\").then(function(response){return response.json();}).then(function(json){_this2.setState({data:json.sort(function(a,b){return a.time<b.time?1:-1;})});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:function onClick(){_this3.setState({isModalOpen:true});document.getElementById(\"root\").style.filter=\"blur(5px)\";},children:\"Leave Your Comment Here\"}),this.state.isModalOpen&&/*#__PURE__*/_jsx(Modal,{title:\"Add a comment\",state:this.state,onClose:function onClose(){document.getElementById(\"root\").style.filter=\"blur(0px) grayscale(0%)\";_this3.setState({isModalOpen:false,name:\"\",comment:\"\",time:\"\",errors:{error_name:\"\",error_comment:\"\"}});},handleSubmit:this.handleSubmit,handleNameChange:this.handleNameChange,handleCommentChange:this.handleCommentChange}),/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto align-center\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"col\",children:\"Commenter's Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col\",children:\"Comment\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col\",children:\"Submitted Time\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.data.map(function(each){return/*#__PURE__*/_jsxs(\"tr\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"col\",children:each.name}),/*#__PURE__*/_jsx(\"td\",{className:\"col\",children:each.comment}),/*#__PURE__*/_jsx(\"td\",{className:\"col\",\"data-testid\":\"comment_time\",children:timeConverter(each.time)})]},each.id);})})]})})]});}}]);return Comment;}(React.Component);export{Comment as default};","map":{"version":3,"sources":["/Users/yiyaoguo/Desktop/final-project-frontend/src/Comment.js"],"names":["React","Modal","toast","timeConverter","UNIX_timestamp","x","Date","toISOString","slice","replace","validate_form","name","comment","errors","error_name","error_comment","Comment","props","handleCommentChange","event","setState","target","value","handleNameChange","handleSubmit","preventDefault","state","document","getElementById","style","filter","isModalOpen","fetch","method","body","JSON","stringify","time","getTime","headers","then","response","json","success","history","push","data","title","sort","a","b","map","each","id","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./style.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Modal from \"./Modal\";\nimport { toast } from \"react-toastify\";\nfunction timeConverter(UNIX_timestamp) {\n  let x = new Date(UNIX_timestamp).toISOString().slice(0, 19).replace(\"T\", \" \");\n  return x;\n}\nfunction validate_form(name, comment) {\n  let errors = {\n    error_name: \"\",\n    error_comment: \"\",\n  };\n  if (name === \"\") {\n    errors.error_name = \"Commenter's name cannot be empty\";\n  }\n  if (comment === \"\") {\n    errors.error_comment = \"Comment cannot be empty\";\n  }\n  return errors;\n}\nexport default class Comment extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isModalOpen: false,\n      name: \"\",\n      comment: \"\",\n      time: \"\",\n      errors: {\n        error_name: \"\",\n        error_comment: \"\",\n      },\n      data: [],\n    };\n  }\n  handleCommentChange = (event) => {\n    this.setState({\n      comment: event.target.value,\n    });\n  };\n  handleNameChange = (event) => {\n    this.setState({\n      name: event.target.value,\n    });\n  };\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const name = this.state.name;\n    const comment = this.state.comment;\n    const errors = validate_form(name, comment);\n    if (errors.error_comment !== \"\" || errors.error_name !== \"\") {\n      this.setState({\n        errors: {\n          error_name: errors.error_name,\n          error_comment: errors.error_comment,\n        },\n      });\n      return;\n    } else {\n      document.getElementById(\"root\").style.filter = \"blur(0px) grayscale(0%)\";\n      this.setState({\n        isModalOpen: false,\n      });\n      fetch(\"https://itp404-final-project-backend.herokuapp.com/api/comments\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          name: this.state.name,\n          comment: this.state.comment,\n          //   time: Math.round(new Date().getTime() / 1000),\n          time: new Date().getTime(),\n          error_name: \"\",\n          error_comment: \"\",\n        }),\n        headers: {\n          \"Content-type\": \"application/json\",\n        },\n      })\n        .then((response) => {\n          return response.json();\n        })\n        .then((json) => {\n          toast.success(`Your comment was successfully sent`);\n          this.props.history.push(\"/\");\n          this.props.history.push(\"/comment\");\n        });\n    }\n  };\n  componentDidMount() {\n    document.title = \"Comments\";\n    fetch(\"https://itp404-final-project-backend.herokuapp.com/api/comments\")\n      .then((response) => {\n        return response.json();\n      })\n      .then((json) => {\n        this.setState({\n          data: json.sort((a, b) => (a.time < b.time ? 1 : -1)),\n        });\n      });\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        <button\n          className=\"btn btn-primary\"\n          type=\"button\"\n          onClick={() => {\n            this.setState({ isModalOpen: true });\n            document.getElementById(\"root\").style.filter = \"blur(5px)\";\n          }}\n        >\n          Leave Your Comment Here\n        </button>\n\n        {this.state.isModalOpen && (\n          <Modal\n            title=\"Add a comment\"\n            state={this.state}\n            onClose={() => {\n              document.getElementById(\"root\").style.filter =\n                \"blur(0px) grayscale(0%)\";\n              this.setState({\n                isModalOpen: false,\n                name: \"\",\n                comment: \"\",\n                time: \"\",\n                errors: {\n                  error_name: \"\",\n                  error_comment: \"\",\n                },\n              });\n            }}\n            handleSubmit={this.handleSubmit}\n            handleNameChange={this.handleNameChange}\n            handleCommentChange={this.handleCommentChange}\n          />\n        )}\n        <div className=\"container mx-auto align-center\">\n          <table className=\"table table-striped\">\n            <thead>\n              <tr className=\"row\">\n                <th className=\"col\">Commenter's Name</th>\n                <th className=\"col\">Comment</th>\n                <th className=\"col\">Submitted Time</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.data.map((each) => (\n                <tr key={each.id} className=\"row\">\n                  <td className=\"col\">{each.name}</td>\n                  <td className=\"col\">{each.comment}</td>\n                  <td className=\"col\" data-testid=\"comment_time\">\n                    {timeConverter(each.time)}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}