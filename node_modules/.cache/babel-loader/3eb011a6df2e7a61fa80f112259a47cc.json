{"ast":null,"code":"import _classCallCheck from\"/Users/yiyaoguo/Desktop/final-project-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yiyaoguo/Desktop/final-project-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/yiyaoguo/Desktop/final-project-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yiyaoguo/Desktop/final-project-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{toast}from\"react-toastify\";import\"./style.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditLog=/*#__PURE__*/function(_React$Component){_inherits(EditLog,_React$Component);var _super=_createSuper(EditLog);function EditLog(props){var _this;_classCallCheck(this,EditLog);_this=_super.call(this,props);_this.state={title:\"\",year:\"\",body:\"\",continentId:\"\",country:\"\",error:\"\"};return _this;}_createClass(EditLog,[{key:\"deletePost\",value:function deletePost(){var _this2=this;var isConfirmed=window.confirm(\"Are you sure to delete this log?\");if(!isConfirmed){return;}var id=this.props.match.params.logId;fetch(\"https://itp404-final-project-backend.herokuapp.com/api/logs/\".concat(id),{method:\"DELETE\"}).then(function(){toast.success(\"Successfully deleted\");_this2.props.history.push(\"/\");_this2.props.history.push(\"/logs\");});}},{key:\"handleYearChange\",value:function handleYearChange(event){this.setState({year:event.target.value});}},{key:\"handleTitleChange\",value:function handleTitleChange(event){this.setState({title:event.target.value});}},{key:\"handleBodyChange\",value:function handleBodyChange(event){this.setState({body:event.target.value});}},{key:\"handleSubmit\",value:function handleSubmit(event){var _this3=this;event.preventDefault();if(this.state.title===\"\"){this.setState({error:\"Title cannot be empty\"});return;}var id=this.props.match.params.logId;fetch(\"https://itp404-final-project-backend.herokuapp.com/api/logs/\".concat(id),{method:\"PUT\",body:JSON.stringify({title:this.state.title,year:this.state.year,body:this.state.body,continentId:this.state.continentId,country:this.state.country}),headers:{\"Content-type\":\"application/json\"}}).then(function(response){return response.json();}).then(function(json){toast.success(\"Log \\\"\".concat(json.title,\"\\\" was successfully updated\"));_this3.props.history.push(\"/\");_this3.props.history.push(\"/logs\");});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;var id=this.props.match.params.logId;fetch(\"https://itp404-final-project-backend.herokuapp.com/api/logs/\".concat(id)).then(function(response){return response.json();}).then(function(json){_this4.setState(json);document.title=\"Log \\\"\".concat(_this4.state.title,\"\\\"\");});}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){_this5.handleSubmit(event);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my-3 form-group required\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-label\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{id:\"title\",className:\"form-control\",value:this.state.title,onChange:function onChange(event){_this5.handleTitleChange(event);}}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:this.state.error})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"body\",className:\"form-label\",children:\"Body\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"body\",className:\"form-control\",value:this.state.body,onChange:function onChange(event){_this5.handleBodyChange(event);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary edit\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:function onClick(){_this5.deletePost();},children:\"Delete\"})]});}}]);return EditLog;}(React.Component);export{EditLog as default};","map":{"version":3,"sources":["/Users/yiyaoguo/Desktop/final-project-frontend/src/Log.js"],"names":["React","toast","EditLog","props","state","title","year","body","continentId","country","error","isConfirmed","window","confirm","id","match","params","logId","fetch","method","then","success","history","push","event","setState","target","value","preventDefault","JSON","stringify","headers","response","json","document","handleSubmit","handleTitleChange","color","handleBodyChange","deletePost","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"./style.css\";\nexport default class EditLog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: \"\",\n      year: \"\",\n      body: \"\",\n      continentId: \"\",\n      country: \"\",\n      error: \"\",\n    };\n  }\n  deletePost() {\n    const isConfirmed = window.confirm(\"Are you sure to delete this log?\");\n    if (!isConfirmed) {\n      return;\n    }\n    const id = this.props.match.params.logId;\n    fetch(`https://itp404-final-project-backend.herokuapp.com/api/logs/${id}`, {\n      method: \"DELETE\",\n    }).then(() => {\n      toast.success(`Successfully deleted`);\n      this.props.history.push(\"/\");\n      this.props.history.push(\"/logs\");\n    });\n  }\n  handleYearChange(event) {\n    this.setState({\n      year: event.target.value,\n    });\n  }\n  handleTitleChange(event) {\n    this.setState({\n      title: event.target.value,\n    });\n  }\n  handleBodyChange(event) {\n    this.setState({\n      body: event.target.value,\n    });\n  }\n  handleSubmit(event) {\n    event.preventDefault();\n    if (this.state.title === \"\") {\n      this.setState({ error: \"Title cannot be empty\" });\n      return;\n    }\n    const id = this.props.match.params.logId;\n    fetch(`https://itp404-final-project-backend.herokuapp.com/api/logs/${id}`, {\n      method: \"PUT\",\n      body: JSON.stringify({\n        title: this.state.title,\n        year: this.state.year,\n        body: this.state.body,\n        continentId: this.state.continentId,\n        country: this.state.country,\n      }),\n      headers: {\n        \"Content-type\": \"application/json\",\n      },\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then((json) => {\n        toast.success(`Log \"${json.title}\" was successfully updated`);\n        this.props.history.push(\"/\");\n        this.props.history.push(\"/logs\");\n      });\n  }\n  componentDidMount() {\n    const id = this.props.match.params.logId;\n    fetch(`https://itp404-final-project-backend.herokuapp.com/api/logs/${id}`)\n      .then((response) => {\n        return response.json();\n      })\n      .then((json) => {\n        this.setState(json);\n        document.title = `Log \"${this.state.title}\"`;\n      });\n  }\n\n  render() {\n    return (\n      <form\n        onSubmit={(event) => {\n          this.handleSubmit(event);\n        }}\n      >\n        <div className=\"my-3 form-group required\">\n          <label htmlFor=\"title\" className=\"form-label\">\n            Title\n          </label>\n          <input\n            id=\"title\"\n            className=\"form-control\"\n            value={this.state.title}\n            onChange={(event) => {\n              this.handleTitleChange(event);\n            }}\n          />\n          <span style={{ color: \"red\" }}>{this.state.error}</span>\n        </div>\n        <div className=\"my-3\">\n          <label htmlFor=\"body\" className=\"form-label\">\n            Body\n          </label>\n          <textarea\n            id=\"body\"\n            className=\"form-control\"\n            value={this.state.body}\n            onChange={(event) => {\n              this.handleBodyChange(event);\n            }}\n          />\n        </div>\n        <button type=\"submit\" className=\"btn btn-primary edit\">\n          Edit\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn btn-danger\"\n          onClick={() => {\n            this.deletePost();\n          }}\n        >\n          Delete\n        </button>\n      </form>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}